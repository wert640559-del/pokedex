

--- FILE: ./types/pokemon.ts ---

export interface Pokemon {
  id: number;
  name: string;
  url: string;
  sprites: {
    front_default: string;
    other: {
      'official-artwork': {
        front_default: string;
      };
    };
  };
  types: {
    slot: number;
    type: {
      name: string;
      url: string;
    };
  }[];
  stats: {
    base_stat: number;
    stat: {
      name: string;
    };
  }[];
  height: number;
  weight: number;
  abilities: {
    ability: {
      name: string;
    };
  }[];
}

export interface PokemonListResponse {
  count: number;
  next: string | null;
  previous: string | null;
  results: Pokemon[];
}

--- FILE: ./services/api.ts ---

import axios from 'axios';
import { Pokemon, PokemonListResponse } from '../types/pokemon';

const BASE_URL = 'https://pokeapi.co/api/v2';

export const api = axios.create({
  baseURL: BASE_URL,
  timeout: 10000,
});

export const PokemonAPI = {
  getPokemonList: async (offset = 0, limit = 20): Promise<PokemonListResponse> => {
    const response = await api.get(`/pokemon?limit=${limit}&offset=${offset}`);
    return response.data;
  },

  getPokemonDetail: async (idOrName: string | number): Promise<Pokemon> => {
    const response = await api.get(`/pokemon/${idOrName}`);
    return response.data;
  },

  getPokemonByType: async (type: string) => {
    const response = await api.get(`/type/${type}`);
    return response.data;
  },
};

--- FILE: ./services/storage.ts ---

import AsyncStorage from '@react-native-async-storage/async-storage';

const FAVORITES_KEY = 'favorite_pokemon';

export const StorageService = {
  getFavorites: async (): Promise<number[]> => {
    try {
      const favorites = await AsyncStorage.getItem(FAVORITES_KEY);
      return favorites ? JSON.parse(favorites) : [];
    } catch {
      return [];
    }
  },

  addFavorite: async (pokemonId: number): Promise<boolean> => {
    try {
      const favorites = await StorageService.getFavorites();
      if (!favorites.includes(pokemonId)) {
        favorites.push(pokemonId);
        await AsyncStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));
      }
      return true;
    } catch {
      return false;
    }
  },

  removeFavorite: async (pokemonId: number): Promise<boolean> => {
    try {
      const favorites = await StorageService.getFavorites();
      const updatedFavorites = favorites.filter(id => id !== pokemonId);
      await AsyncStorage.setItem(FAVORITES_KEY, JSON.stringify(updatedFavorites));
      return true;
    } catch {
      return false;
    }
  },

  isFavorite: async (pokemonId: number): Promise<boolean> => {
    const favorites = await StorageService.getFavorites();
    return favorites.includes(pokemonId);
  },
};

--- FILE: ./hooks/usePokemon.ts ---

import { useState, useEffect } from 'react';
import { Pokemon, PokemonListResponse } from '../types/pokemon';
import { PokemonAPI } from '../services/api';

export const usePokemon = () => {
  const [pokemonList, setPokemonList] = useState<Pokemon[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [offset, setOffset] = useState(0);
  const [hasMore, setHasMore] = useState(true);

  const loadPokemon = async (loadOffset = 0) => {
    try {
      setLoading(true);
      setError(null);
      
      const data: PokemonListResponse = await PokemonAPI.getPokemonList(loadOffset);
      
      // Get detailed information for each Pokemon
      const detailedPokemon = await Promise.all(
        data.results.map(async (pokemon, index) => {
          try {
            return await PokemonAPI.getPokemonDetail(loadOffset + index + 1);
          } catch {
            // Fallback to basic info if detail fetch fails
            return { ...pokemon, id: loadOffset + index + 1 };
          }
        })
      );

      if (loadOffset === 0) {
        setPokemonList(detailedPokemon);
      } else {
        setPokemonList(prev => [...prev, ...detailedPokemon]);
      }

      setHasMore(!!data.next);
      setOffset(loadOffset + 20);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Failed to fetch Pokémon');
    } finally {
      setLoading(false);
    }
  };

  const refresh = () => {
    setOffset(0);
    loadPokemon(0);
  };

  useEffect(() => {
    loadPokemon();
  }, []);

  return {
    pokemonList,
    loading,
    error,
    hasMore,
    loadMore: () => loadPokemon(offset),
    refresh,
  };
};

--- FILE: ./hooks/useNetwork.ts ---

import { useState, useEffect } from 'react';
import { addEventListener, NetInfoState } from '@react-native-community/netinfo';

export const useNetwork = () => {
  const [isConnected, setIsConnected] = useState<boolean | null>(true);

  useEffect(() => {
    const unsubscribe = addEventListener((state: NetInfoState) => {
      setIsConnected(state.isConnected);
    });

    return () => unsubscribe();
  }, []);

  return { isConnected };
};

--- FILE: ./hooks/usePokemonByType.ts ---

// FILE: ./hooks/usePokemonByType.ts

import { useState, useEffect } from 'react';
import { Pokemon } from '../types/pokemon';
import { PokemonAPI } from '../services/api';

export const usePokemonByType = (type: string | null) => {
  const [pokemonList, setPokemonList] = useState<Pokemon[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [offset, setOffset] = useState(0);
  const [hasMore, setHasMore] = useState(true);
  const [loadingMore, setLoadingMore] = useState(false);

  const loadPokemon = async (loadOffset = 0, loadMore = false) => {
    try {
      if (loadMore) {
        setLoadingMore(true);
      } else {
        setLoading(true);
      }
      setError(null);

      if (type) {
        // Load by type - tetap 20 untuk performance
        const typeData = await PokemonAPI.getPokemonByType(type);
        console.log('Type data:', typeData);
        
        const detailedPokemon = await Promise.all(
          typeData.pokemon.slice(0, 20).map(async (p: any) => {
            try {
              const pokemonName = p.pokemon.name;
              const pokemonDetail = await PokemonAPI.getPokemonDetail(pokemonName);
              return pokemonDetail;
            } catch (error) {
              console.error(`Error loading ${p.pokemon.name}:`, error);
              return {
                id: 0,
                name: p.pokemon.name,
                url: p.pokemon.url,
                sprites: { front_default: '', other: { 'official-artwork': { front_default: '' } } },
                types: [],
                stats: [],
                height: 0,
                weight: 0,
                abilities: []
              };
            }
          })
        );
        setPokemonList(detailedPokemon.filter(p => p.id !== 0));
        setHasMore(false); // Untuk type-based, tidak ada load more
      } else {
        // Load all - IMPLEMENTASI INFINITE SCROLL
        const limit = 20; // Load 20 per batch
        const data = await PokemonAPI.getPokemonList(loadOffset, limit);
        console.log(`Loading Pokémon ${loadOffset} to ${loadOffset + limit}`);
        
        const detailedPokemon = await Promise.all(
          data.results.map(async (pokemon, index) => {
            try {
              // Gunakan ID dari URL atau index
              const pokemonId = loadOffset + index + 1;
              return await PokemonAPI.getPokemonDetail(pokemonId);
            } catch (error) {
              console.error(`Error loading Pokemon ${loadOffset + index + 1}:`, error);
              return {
                id: loadOffset + index + 1,
                name: pokemon.name,
                url: pokemon.url,
                sprites: { front_default: '', other: { 'official-artwork': { front_default: '' } } },
                types: [],
                stats: [],
                height: 0,
                weight: 0,
                abilities: []
              };
            }
          })
        );

        const validPokemon = detailedPokemon.filter(p => p.id !== 0);
        
        if (loadOffset === 0) {
          setPokemonList(validPokemon);
        } else {
          setPokemonList(prev => [...prev, ...validPokemon]);
        }

        setHasMore(!!data.next);
        setOffset(loadOffset + limit);
      }
    } catch (err) {
      console.error('Error in usePokemonByType:', err);
      setError(err instanceof Error ? err.message : 'Failed to fetch Pokémon');
    } finally {
      setLoading(false);
      setLoadingMore(false);
    }
  };

  const loadMore = () => {
    if (!loadingMore && hasMore && !type) { // Hanya untuk tab "All"
      loadPokemon(offset, true);
    }
  };

  const refresh = () => {
    setOffset(0);
    setHasMore(true);
    loadPokemon(0);
  };

  useEffect(() => {
    setOffset(0);
    setHasMore(true);
    loadPokemon(0);
  }, [type]);

  return {
    pokemonList,
    loading,
    loadingMore,
    error,
    hasMore,
    loadMore,
    refresh,
  };
};

--- FILE: ./hooks/useResponsive.ts ---

import { Dimensions, ScaledSize } from 'react-native';
import { useState, useEffect } from 'react';

// Base dimensions based on iPhone 11
const BASE_WIDTH = 375;
const BASE_HEIGHT = 812;

export const useResponsive = () => {
  const [dimensions, setDimensions] = useState(Dimensions.get('window'));

  useEffect(() => {
    const subscription = Dimensions.addEventListener('change', ({ window }: { window: ScaledSize }) => {
      setDimensions(window);
    });

    return () => subscription?.remove();
  }, []);

  // Scale based on width
  const scale = (size: number) => (dimensions.width / BASE_WIDTH) * size;
  
  // Scale based on height
  const verticalScale = (size: number) => (dimensions.height / BASE_HEIGHT) * size;
  
  // Moderate scale with factor
  const moderateScale = (size: number, factor: number = 0.5) => 
    size + (scale(size) - size) * factor;

  return {
    width: dimensions.width,
    height: dimensions.height,
    scale,
    verticalScale,
    moderateScale,
    isSmallDevice: dimensions.width < 375,
    isLargeDevice: dimensions.width > 768,
    isTablet: dimensions.width >= 768,
    isLandscape: dimensions.width > dimensions.height,
  };
};

--- FILE: ./components/ErrorMessage.tsx ---

import React from 'react';
import { View, Text, TouchableOpacity, StyleSheet } from 'react-native';
import { FontAwesome6 } from '@react-native-vector-icons/fontawesome6';
import { useResponsive } from '../hooks/useResponsive';

interface ErrorMessageProps {
  message: string;
  onRetry?: () => void;
}

export const ErrorMessage: React.FC<ErrorMessageProps> = ({ message, onRetry }) => {
  const { moderateScale } = useResponsive();
  
  const styles = createStyles(moderateScale);
  
  return (
    <View style={styles.container}>
      <FontAwesome6 name="triangle-exclamation" size={moderateScale(48)} color="#DC0A2D" iconStyle='solid'/>
      <Text style={styles.message}>{message}</Text>
      {onRetry && (
        <TouchableOpacity style={styles.retryButton} onPress={onRetry}>
          <Text style={styles.retryText}>Try Again</Text>
        </TouchableOpacity>
      )}
    </View>
  );
};

const createStyles = (moderateScale: (size: number, factor?: number) => number) => 
  StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    padding: moderateScale(20),
  },
  message: {
    fontSize: moderateScale(16),
    color: '#1D2C5E',
    textAlign: 'center',
    marginVertical: moderateScale(16),
    fontWeight: '500',
  },
  retryButton: {
    backgroundColor: '#DC0A2D',
    paddingHorizontal: moderateScale(24),
    paddingVertical: moderateScale(12),
    borderRadius: moderateScale(25),
    shadowColor: '#1D2C5E',
    shadowOffset: { width: 0, height: moderateScale(2) },
    shadowOpacity: 0.2,
    shadowRadius: moderateScale(4),
    elevation: 3,
  },
  retryText: {
    color: '#FFFFFF',
    fontSize: moderateScale(16),
    fontWeight: 'bold',
  },
});

--- FILE: ./components/LoadingIndicator.tsx ---

import React from 'react';
import { View, ActivityIndicator, Text, StyleSheet } from 'react-native';
import { useResponsive } from '../hooks/useResponsive';

interface LoadingIndicatorProps {
  size?: 'small' | 'large';
  text?: string;
}

export const LoadingIndicator: React.FC<LoadingIndicatorProps> = ({ 
  size = 'large', 
  text = 'Loading Pokémon...' 
}) => {
  const { moderateScale } = useResponsive();

  const styles = createStyles(moderateScale);

  return (
    <View style={styles.container}>
      <ActivityIndicator size={size} color="#DC0A2D" />
      <Text style={styles.text}>{text}</Text>
    </View>
  );
};

const createStyles = (moderateScale: (size: number, factor?: number) => number) => 
  StyleSheet.create({
    container: {
      padding: moderateScale(20),
      alignItems: 'center',
      justifyContent: 'center',
    },
    text: {
      marginTop: moderateScale(12),
      fontSize: moderateScale(16),
      color: '#1D2C5E',
      textAlign: 'center',
      fontWeight: '600',
    },
  });

--- FILE: ./components/NetworkStatus.tsx ---

import React from 'react';
import { View, Text, StyleSheet } from 'react-native';
import { useNetwork } from '../hooks/useNetwork';
import { FontAwesome6 } from '@react-native-vector-icons/fontawesome6';
import { useResponsive } from '../hooks/useResponsive';

export const NetworkStatus: React.FC = () => {
  const { isConnected } = useNetwork();
  const { moderateScale } = useResponsive();

  if (isConnected) return null;

  const styles = createStyles(moderateScale);

  return (
    <View style={styles.container}>
      <FontAwesome6 name="wifi" size={moderateScale(16)} color="white" iconStyle='solid'/>
      <Text style={styles.text}>No internet connection</Text>
    </View>
  );
};

const createStyles = (moderateScale: (size: number, factor?: number) => number) => 
  StyleSheet.create({
  container: {
    backgroundColor: '#DC0A2D',
    padding: moderateScale(10),
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    shadowColor: '#1D2C5E',
    shadowOffset: { width: 0, height: moderateScale(2) },
    shadowOpacity: 0.3,
    shadowRadius: moderateScale(4),
    elevation: 4,
  },
  text: {
    color: 'white',
    marginLeft: moderateScale(8),
    fontSize: moderateScale(14),
    fontWeight: 'bold',
  },
});

--- FILE: ./components/PokemonCard.tsx ---

import React from 'react';
import { TouchableOpacity, View, Text, Image, StyleSheet } from 'react-native';
import { Pokemon } from '../types/pokemon';
import { FontAwesome6 } from '@react-native-vector-icons/fontawesome6';
import { useResponsive } from '../hooks/useResponsive';

interface PokemonCardProps {
  pokemon: Pokemon;
  onPress: (pokemon: Pokemon) => void;
  isFavorite?: boolean;
  onToggleFavorite?: (pokemonId: number) => void;
}

export const PokemonCard: React.FC<PokemonCardProps> = ({ 
  pokemon, 
  onPress, 
  isFavorite = false, 
  onToggleFavorite 
}) => {
  const { scale, verticalScale, moderateScale, width, isSmallDevice, isTablet } = useResponsive();

  const imageUrl = pokemon.sprites?.other?.['official-artwork']?.front_default 
    || pokemon.sprites?.front_default 
    || 'https://via.placeholder.com/100x100/ccc/fff?text=Pokemon';

  const handleFavoritePress = () => {
    onToggleFavorite?.(pokemon.id);
  };

  const styles = createStyles(scale, verticalScale, moderateScale, width, isSmallDevice, isTablet);

  // Get primary type for card accent
  const primaryType = pokemon.types?.[0]?.type.name || 'normal';
  const typeColor = getTypeColor(primaryType);

  return (
    <View style={styles.cardContainer}>
      <TouchableOpacity style={styles.card} onPress={() => onPress(pokemon)}>
        {/* Card Header with Gradient */}
        <View style={[styles.cardHeader, { backgroundColor: typeColor }]}>
          <Text style={styles.cardId}>#{pokemon.id.toString().padStart(3, '0')}</Text>
          {onToggleFavorite && (
            <TouchableOpacity style={styles.favoriteButton} onPress={handleFavoritePress}>
              <FontAwesome6 
                name={isFavorite ? "heart" : "heart-circle-plus"} 
                size={moderateScale(14)} 
                color={isFavorite ? "#FFCB05" : "#FFFFFF"} 
                iconStyle='solid'
              />
            </TouchableOpacity>
          )}
        </View>
        
        {/* Pokemon Image */}
        <View style={styles.imageContainer}>
          <Image source={{ uri: imageUrl }} style={styles.image} />
        </View>
        
        {/* Card Info */}
        <View style={styles.info}>
          <Text style={styles.name} numberOfLines={1}>
            {pokemon.name.charAt(0).toUpperCase() + pokemon.name.slice(1)}
          </Text>
          
          <View style={styles.types}>
            {pokemon.types?.map((typeInfo, index) => (
              <View key={index} style={[styles.type, { backgroundColor: getTypeColor(typeInfo.type.name) }]}>
                <Text style={styles.typeText} numberOfLines={1}>
                  {typeInfo.type.name.toUpperCase()}
                </Text>
              </View>
            ))}
          </View>
        </View>
      </TouchableOpacity>
    </View>
  );
};

const getTypeColor = (type: string): string => {
  const colors: { [key: string]: string } = {
    normal: '#A8A878',
    fire: '#EE8130',
    water: '#6390F0',
    electric: '#F7D02C',
    grass: '#7AC74C',
    ice: '#96D9D6',
    fighting: '#C22E28',
    poison: '#A33EA1',
    ground: '#E2BF65',
    flying: '#A98FF3',
    psychic: '#F95587',
    bug: '#A6B91A',
    rock: '#B6A136',
    ghost: '#735797',
    dragon: '#6F35FC',
    dark: '#705746',
    steel: '#B7B7CE',
    fairy: '#D685AD',
  };
  return colors[type] || '#68A090';
};

const createStyles = (
  scale: (size: number) => number,
  verticalScale: (size: number) => number,
  moderateScale: (size: number, factor?: number) => number,
  width: number,
  isSmallDevice: boolean,
  isTablet: boolean
) => {
  const screenPadding = moderateScale(16);
  const gap = moderateScale(12);
  const cardWidth = (width - screenPadding * 2 - gap) / 2;

  return StyleSheet.create({
    cardContainer: {
      width: cardWidth,
      marginBottom: moderateScale(16),
      marginHorizontal: moderateScale(4),
    },
    card: {
      backgroundColor: '#FFFFFF',
      borderRadius: moderateScale(16),
      shadowColor: '#1D2C5E',
      shadowOffset: { 
        width: 0, 
        height: moderateScale(4) 
      },
      shadowOpacity: 0.15,
      shadowRadius: moderateScale(8),
      elevation: 6,
      alignItems: 'center',
      flex: 1,
      overflow: 'hidden',
      borderWidth: 2,
      borderColor: '#F8F8F8',
    },
    cardHeader: {
      flexDirection: 'row',
      justifyContent: 'space-between',
      alignItems: 'center',
      width: '100%',
      paddingHorizontal: moderateScale(12),
      paddingVertical: moderateScale(6),
      backgroundColor: '#DC0A2D',
    },
    cardId: {
      fontSize: isSmallDevice ? moderateScale(10) : moderateScale(12),
      fontWeight: 'bold',
      color: '#FFFFFF',
    },
    favoriteButton: {
      padding: moderateScale(2),
    },
    imageContainer: {
      padding: moderateScale(12),
      alignItems: 'center',
    },
    image: {
      width: isTablet ? moderateScale(100) : 
             isSmallDevice ? moderateScale(80) : moderateScale(90),
      height: isTablet ? moderateScale(100) : 
              isSmallDevice ? moderateScale(80) : moderateScale(90),
    },
    info: {
      alignItems: 'center',
      padding: moderateScale(12),
      paddingTop: 0,
      width: '100%',
    },
    name: {
      fontSize: isTablet ? moderateScale(16) : 
                isSmallDevice ? moderateScale(12) : moderateScale(14),
      fontWeight: 'bold',
      color: '#333333',
      textAlign: 'center',
      marginBottom: verticalScale(8),
    },
    types: {
      flexDirection: 'row',
      flexWrap: 'wrap',
      justifyContent: 'center',
    },
    type: {
      paddingHorizontal: moderateScale(8),
      paddingVertical: moderateScale(4),
      borderRadius: moderateScale(20),
      margin: moderateScale(2),
      minWidth: moderateScale(50),
    },
    typeText: {
      fontSize: isSmallDevice ? moderateScale(8) : moderateScale(9),
      fontWeight: 'bold',
      color: '#FFFFFF',
      textAlign: 'center',
    },
  });
};

--- FILE: ./components/PokemonNavbar.tsx ---

// UPDATE: ./components/PokemonNavbar.tsx
import React from 'react';
import { View, Image, StyleSheet, Platform, StatusBar } from 'react-native';
import { useResponsive } from '../hooks/useResponsive';

interface PokemonNavbarProps {
  showLogo?: boolean;
}

export const PokemonNavbar: React.FC<PokemonNavbarProps> = ({ showLogo = true }) => {
  const { moderateScale, isSmallDevice } = useResponsive();

  const styles = createStyles(moderateScale, isSmallDevice);

  if (!showLogo) return null;

  return (
    <View style={styles.container}>
      <StatusBar 
        barStyle="light-content" 
        backgroundColor="#DC0A2D" 
        translucent={false}
      />
      <View style={styles.navbar}>
        <View style={styles.logoContainer}>
          <Image 
            source={require('../assets/images/pokedex.png')} 
            style={styles.logo}
            resizeMode="contain"
          />
        </View>
      </View>
    </View>
  );
};

const createStyles = (
  moderateScale: (size: number, factor?: number) => number,
  isSmallDevice: boolean
) => StyleSheet.create({
  container: {
    backgroundColor: '#DC0A2D',
  },
  navbar: {
    backgroundColor: '#DC0A2D',
    paddingHorizontal: moderateScale(16),
    paddingVertical: moderateScale(5),
    paddingTop: Platform.OS === 'ios' ? moderateScale(50) : moderateScale(12),
    borderBottomWidth: moderateScale(4),
    borderBottomColor: '#1D2C5E',
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: moderateScale(4),
    },
    shadowOpacity: 0.3,
    shadowRadius: moderateScale(8),
    elevation: 8,
  },
  logoContainer: {
    alignItems: 'center',
    justifyContent: 'center',
  },
  logo: {
    width: isSmallDevice ? moderateScale(120) : moderateScale(150),
    height: isSmallDevice ? moderateScale(40) : moderateScale(50),
  },
});

--- FILE: ./screens/FavoritesScreen.tsx ---

import React, { useState, useEffect } from 'react';
import { View, FlatList, Text, StyleSheet, RefreshControl } from 'react-native';
import { useIsFocused } from '@react-navigation/native';
import { StorageService } from '../services/storage';
import { PokemonAPI } from '../services/api';
import { PokemonCard } from '../components/PokemonCard';
import { LoadingIndicator } from '../components/LoadingIndicator';
import { Pokemon } from '../types/pokemon';
import { FontAwesome6 } from '@react-native-vector-icons/fontawesome6';
import { useResponsive } from '../hooks/useResponsive';
import { NetworkStatus } from '../components/NetworkStatus';
import { ErrorMessage } from '../components/ErrorMessage';
import { PokemonNavbar } from '../components/PokemonNavbar';

export const FavoritesScreen: React.FC<{ navigation: any }> = ({ navigation }) => {
  const [favorites, setFavorites] = useState<Pokemon[]>([]);
  const [loading, setLoading] = useState(true);
  const [refreshing, setRefreshing] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const isFocused = useIsFocused();
  const { moderateScale } = useResponsive();

  const loadFavorites = async () => {
    try {
      setError(null);
      const favoriteIds = await StorageService.getFavorites();
      
      if (favoriteIds.length === 0) {
        setFavorites([]);
        setLoading(false);
        setRefreshing(false);
        return;
      }

      const favoritePokemon = await Promise.all(
        favoriteIds.map(id => PokemonAPI.getPokemonDetail(id))
      );
      
      setFavorites(favoritePokemon);
    } catch (error) {
      console.error('Error loading favorites:', error);
      setError('Failed to load favorites');
    } finally {
      setLoading(false);
      setRefreshing(false);
    }
  };

  useEffect(() => {
    if (isFocused) {
      loadFavorites();
    }
  }, [isFocused]);

  const onRefresh = () => {
    setRefreshing(true);
    loadFavorites();
  };

  const handlePokemonPress = (pokemon: Pokemon) => {
    navigation.navigate('PokemonDetail', { pokemon });
  };

  const styles = createStyles(moderateScale);

  if (loading) {
    return <LoadingIndicator text="Loading favorites..." />;
  }

  if (error && favorites.length === 0) {
    return (
      <View style={styles.container}>
        <NetworkStatus />
        <ErrorMessage message={error} onRetry={loadFavorites} />
      </View>
    );
  }

  return (
    <View style={styles.container}>
      <PokemonNavbar/>
      <NetworkStatus />
      
      <FlatList
        data={favorites}
        renderItem={({ item }) => (
          <PokemonCard
            pokemon={item}
            onPress={handlePokemonPress}
          />
        )}
        keyExtractor={(item) => item.id.toString()}
        refreshControl={
          <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />
        }
        numColumns={2}
        columnWrapperStyle={styles.columnWrapper}
        ListEmptyComponent={
          <View style={styles.emptyState}>
            <FontAwesome6 name="heart" size={moderateScale(64)} color="#ccc" />
            <Text style={styles.emptyText}>No favorites yet</Text>
            <Text style={styles.emptySubtext}>
              Tap the heart icon on Pokémon to add them here
            </Text>
          </View>
        }
        contentContainerStyle={[
          styles.listContent,
          favorites.length === 0 && styles.emptyListContent
        ]}
        showsVerticalScrollIndicator={false}
      />
    </View>
  );
};

const createStyles = (moderateScale: (size: number, factor?: number) => number) => 
  StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#f5f5f5',
  },
  columnWrapper: {
    justifyContent: 'space-between',
  },
  listContent: {
    flexGrow: 1,
    paddingHorizontal: moderateScale(8),
    paddingBottom: moderateScale(20),
  },
  emptyListContent: {
    flexGrow: 1,
    justifyContent: 'center',
  },
  emptyState: {
    alignItems: 'center',
    padding: moderateScale(32),
    flex: 1,
    justifyContent: 'center',
  },
  emptyText: {
    fontSize: moderateScale(18),
    color: '#666',
    marginTop: moderateScale(16),
    fontWeight: '600',
  },
  emptySubtext: {
    fontSize: moderateScale(14),
    color: '#999',
    marginTop: moderateScale(8),
    textAlign: 'center',
    lineHeight: moderateScale(20),
  },
});

export default FavoritesScreen;

--- FILE: ./screens/PokemonDetailScreen.tsx ---

import React, { useState, useEffect } from 'react';
import { 
  ScrollView, 
  View, 
  Text, 
  Image, 
  StyleSheet, 
  TouchableOpacity
} from 'react-native';
import { Pokemon } from '../types/pokemon';
import { StorageService } from '../services/storage';
import { FontAwesome6 } from '@react-native-vector-icons/fontawesome6';
import { useResponsive } from '../hooks/useResponsive';
import { PokemonNavbar } from '../components/PokemonNavbar';

interface PokemonDetailScreenProps {
  route: any;
  navigation: any;
}

export const PokemonDetailScreen: React.FC<PokemonDetailScreenProps> = ({ 
  route, 
  navigation 
}) => {
  const { pokemon } = route.params;
  const [isFavorite, setIsFavorite] = useState(false);
  const { scale, verticalScale, moderateScale, width, height, isSmallDevice, isTablet } = useResponsive();

  useEffect(() => {
    checkFavoriteStatus();
  }, [pokemon.id]);

  const checkFavoriteStatus = async () => {
    const favorite = await StorageService.isFavorite(pokemon.id);
    setIsFavorite(favorite);
  };

  const toggleFavorite = async () => {
    if (isFavorite) {
      await StorageService.removeFavorite(pokemon.id);
    } else {
      await StorageService.addFavorite(pokemon.id);
    }
    setIsFavorite(!isFavorite);
  };

  const imageUrl = pokemon.sprites?.other?.['official-artwork']?.front_default 
    || pokemon.sprites?.front_default 
    || 'https://via.placeholder.com/200x200/ccc/fff?text=Pokemon';

  // Get primary type for background theme
  const primaryType = pokemon.types?.[0]?.type.name || 'normal';
  const primaryColor = getTypeColor(primaryType);
  const lightColor = getLightTypeColor(primaryType);

  const styles = createStyles(
    scale, verticalScale, moderateScale, width, height, isSmallDevice, isTablet, primaryColor, lightColor
  );

  return (
    <View style={styles.container}>
      <PokemonNavbar/>
      <ScrollView style={styles.scrollView} showsVerticalScrollIndicator={false}>
        {/* Header with Pokemon-themed background */}
        <View style={styles.headerBackground}>
          <View style={styles.header}>
            <TouchableOpacity onPress={() => navigation.goBack()} style={styles.backButton}>
              <FontAwesome6 name="arrow-left" size={moderateScale(24)} color="#FFFFFF" iconStyle='solid'/>
            </TouchableOpacity>
            
            <TouchableOpacity onPress={toggleFavorite} style={styles.favoriteButton}>
              <FontAwesome6 
                name={isFavorite ? "heart" : "heart-circle-plus"} 
                size={moderateScale(28)} 
                color={isFavorite ? "#FFCB05" : "#FFFFFF"} 
                iconStyle='solid'
              />
            </TouchableOpacity>
          </View>

          <View style={styles.imageSection}>
            <View style={styles.imageContainer}>
              <Image source={{ uri: imageUrl }} style={styles.image} />
            </View>
            <Text style={styles.name}>
              {pokemon.name.charAt(0).toUpperCase() + pokemon.name.slice(1)}
            </Text>
            <Text style={styles.id}>#{pokemon.id.toString().padStart(3, '0')}</Text>
          </View>
        </View>

        {/* Details Section */}
        <View style={styles.detailsSection}>
          {/* Types */}
          <View style={styles.typesSection}>
            <Text style={styles.sectionTitle}>Type</Text>
            <View style={styles.types}>
              {pokemon.types?.map((typeInfo, index) => (
                <View key={index} style={[styles.type, { backgroundColor: getTypeColor(typeInfo.type.name) }]}>
                  <Text style={styles.typeText}>
                    {typeInfo.type.name.toUpperCase()}
                  </Text>
                </View>
              ))}
            </View>
          </View>

          {/* Physical Characteristics */}
          <View style={styles.physicalSection}>
            <Text style={styles.sectionTitle}>Physical Characteristics</Text>
            <View style={styles.physical}>
              <View style={styles.physicalItem}>
                <View style={styles.physicalIcon}>
                  <FontAwesome6 name="ruler-vertical" size={moderateScale(20)} color="#1D2C5E" iconStyle='solid'/>
                </View>
                <View style={styles.physicalInfo}>
                  <Text style={styles.physicalLabel}>Height</Text>
                  <Text style={styles.physicalValue}>{(pokemon.height / 10).toFixed(1)} m</Text>
                </View>
              </View>
              <View style={styles.physicalItem}>
                <View style={styles.physicalIcon}>
                  <FontAwesome6 name="weight-scale" size={moderateScale(20)} color="#1D2C5E" iconStyle='solid'/>
                </View>
                <View style={styles.physicalInfo}>
                  <Text style={styles.physicalLabel}>Weight</Text>
                  <Text style={styles.physicalValue}>{(pokemon.weight / 10).toFixed(1)} kg</Text>
                </View>
              </View>
            </View>
          </View>

          {/* Base Stats */}
          <View style={styles.statsSection}>
            <Text style={styles.sectionTitle}>Base Stats</Text>
            <View style={styles.stats}>
              {pokemon.stats?.map((stat, index) => (
                <View key={index} style={styles.statRow}>
                  <View style={styles.statInfo}>
                    <Text style={styles.statName} numberOfLines={1}>
                      {stat.stat.name.replace('-', ' ').toUpperCase()}
                    </Text>
                    <Text style={styles.statValue}>{stat.base_stat}</Text>
                  </View>
                  <View style={styles.statBarContainer}>
                    <View 
                      style={[
                        styles.statBar, 
                        { 
                          width: `${Math.min(100, (stat.base_stat / 255) * 100)}%`,
                          backgroundColor: getStatColor(stat.base_stat)
                        }
                      ]} 
                    />
                  </View>
                </View>
              ))}
            </View>
          </View>

          {/* Abilities */}
          {pokemon.abilities && (
            <View style={styles.abilitiesSection}>
              <Text style={styles.sectionTitle}>Abilities</Text>
              <View style={styles.abilitiesList}>
                {pokemon.abilities.map((ability, index) => (
                  <View key={index} style={styles.ability}>
                    <FontAwesome6 name="sparkles" size={moderateScale(14)} color="#1D2C5E" />
                    <Text style={styles.abilityText} numberOfLines={1}>
                      {ability.ability.name.replace('-', ' ').toUpperCase()}
                    </Text>
                  </View>
                ))}
              </View>
            </View>
          )}
        </View>
      </ScrollView>
    </View>
  );
};

const getTypeColor = (type: string): string => {
  const colors: { [key: string]: string } = {
    normal: '#A8A878',
    fire: '#EE8130',
    water: '#6390F0',
    electric: '#F7D02C',
    grass: '#7AC74C',
    ice: '#96D9D6',
    fighting: '#C22E28',
    poison: '#A33EA1',
    ground: '#E2BF65',
    flying: '#A98FF3',
    psychic: '#F95587',
    bug: '#A6B91A',
    rock: '#B6A136',
    ghost: '#735797',
    dragon: '#6F35FC',
    dark: '#705746',
    steel: '#B7B7CE',
    fairy: '#D685AD',
  };
  return colors[type] || '#68A090';
};

const getLightTypeColor = (type: string): string => {
  const colors: { [key: string]: string } = {
    normal: '#C6C6A7',
    fire: '#F5AC78',
    water: '#9DB7F5',
    electric: '#FAE078',
    grass: '#A7DB8D',
    ice: '#BCE6E6',
    fighting: '#D67873',
    poison: '#C183C1',
    ground: '#EBD69D',
    flying: '#C6B7F5',
    psychic: '#FA92B2',
    bug: '#C6D16E',
    rock: '#D1C17D',
    ghost: '#A292BC',
    dragon: '#A27DFA',
    dark: '#A29288',
    steel: '#D1D1E0',
    fairy: '#F4BDC9',
  };
  return colors[type] || '#8BB094';
};

const getStatColor = (value: number): string => {
  if (value >= 100) return '#4CD964'; // Green for high stats
  if (value >= 70) return '#FFCC00';   // Yellow for medium-high stats
  if (value >= 40) return '#FF9500';   // Orange for medium stats
  return '#FF3B30';                    // Red for low stats
};

const createStyles = (
  scale: (size: number) => number,
  verticalScale: (size: number) => number,
  moderateScale: (size: number, factor?: number) => number,
  width: number,
  height: number,
  isSmallDevice: boolean,
  isTablet: boolean,
  primaryColor: string,
  lightColor: string
) => StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#F8F8F8',
  },
  scrollView: {
    flex: 1,
  },
  headerBackground: {
    backgroundColor: primaryColor,
    borderBottomLeftRadius: moderateScale(30),
    borderBottomRightRadius: moderateScale(30),
    paddingBottom: verticalScale(30),
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: moderateScale(4),
    },
    shadowOpacity: 0.3,
    shadowRadius: moderateScale(8),
    elevation: 8,
  },
  header: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    paddingHorizontal: moderateScale(16),
    paddingTop: verticalScale(12),
    paddingBottom: verticalScale(16),
  },
  backButton: {
    padding: moderateScale(8),
    backgroundColor: 'rgba(255, 255, 255, 0.2)',
    borderRadius: moderateScale(20),
  },
  favoriteButton: {
    padding: moderateScale(8),
    backgroundColor: 'rgba(255, 255, 255, 0.2)',
    borderRadius: moderateScale(20),
  },
  imageSection: {
    alignItems: 'center',
    padding: moderateScale(20),
  },
  imageContainer: {
    backgroundColor: 'rgba(255, 255, 255, 0.3)',
    borderRadius: moderateScale(100),
    padding: moderateScale(20),
    marginBottom: verticalScale(16),
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: moderateScale(4),
    },
    shadowOpacity: 0.2,
    shadowRadius: moderateScale(6),
    elevation: 6,
  },
  image: {
    width: isTablet ? width * 0.3 : width * 0.4,
    height: isTablet ? width * 0.3 : width * 0.4,
    maxWidth: 250,
    maxHeight: 250,
  },
  name: {
    fontSize: isTablet ? moderateScale(32) : 
              isSmallDevice ? moderateScale(22) : moderateScale(28),
    fontWeight: 'bold',
    color: '#FFFFFF',
    marginTop: verticalScale(8),
    textAlign: 'center',
    textShadowColor: 'rgba(0, 0, 0, 0.3)',
    textShadowOffset: { width: 2, height: 2 },
    textShadowRadius: 4,
  },
  id: {
    fontSize: isTablet ? moderateScale(20) : 
              isSmallDevice ? moderateScale(14) : moderateScale(18),
    color: '#FFFFFF',
    marginTop: verticalScale(4),
    fontWeight: '600',
    opacity: 0.9,
  },
  detailsSection: {
    padding: moderateScale(20),
    marginTop: verticalScale(-20),
  },
  typesSection: {
    backgroundColor: '#FFFFFF',
    padding: moderateScale(20),
    borderRadius: moderateScale(20),
    marginBottom: moderateScale(16),
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: moderateScale(2),
    },
    shadowOpacity: 0.1,
    shadowRadius: moderateScale(4),
    elevation: 4,
  },
  sectionTitle: {
    fontSize: isTablet ? moderateScale(20) : 
              isSmallDevice ? moderateScale(16) : moderateScale(18),
    fontWeight: 'bold',
    color: '#1D2C5E',
    marginBottom: verticalScale(12),
  },
  types: {
    flexDirection: 'row',
    justifyContent: 'center',
    flexWrap: 'wrap',
  },
  type: {
    paddingHorizontal: moderateScale(16),
    paddingVertical: moderateScale(8),
    borderRadius: moderateScale(20),
    margin: moderateScale(4),
    minWidth: isSmallDevice ? moderateScale(70) : moderateScale(80),
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: moderateScale(2),
    },
    shadowOpacity: 0.2,
    shadowRadius: moderateScale(3),
    elevation: 3,
  },
  typeText: {
    fontSize: isSmallDevice ? moderateScale(10) : moderateScale(12),
    fontWeight: 'bold',
    color: '#FFFFFF',
    textAlign: 'center',
  },
  physicalSection: {
    backgroundColor: '#FFFFFF',
    padding: moderateScale(20),
    borderRadius: moderateScale(20),
    marginBottom: moderateScale(16),
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: moderateScale(2),
    },
    shadowOpacity: 0.1,
    shadowRadius: moderateScale(4),
    elevation: 4,
  },
  physical: {
    flexDirection: isSmallDevice ? 'column' : 'row',
    justifyContent: 'space-around',
  },
  physicalItem: {
    flexDirection: 'row',
    alignItems: 'center',
    marginBottom: isSmallDevice ? verticalScale(16) : 0,
    padding: moderateScale(12),
    backgroundColor: '#F8F8F8',
    borderRadius: moderateScale(12),
    minWidth: isSmallDevice ? '100%' : '45%',
  },
  physicalIcon: {
    backgroundColor: '#FFCB05',
    padding: moderateScale(8),
    borderRadius: moderateScale(10),
    marginRight: moderateScale(12),
  },
  physicalInfo: {
    flex: 1,
  },
  physicalLabel: {
    fontSize: isSmallDevice ? moderateScale(12) : moderateScale(14),
    color: '#666',
    marginBottom: verticalScale(4),
    fontWeight: '500',
  },
  physicalValue: {
    fontSize: isSmallDevice ? moderateScale(14) : moderateScale(16),
    fontWeight: 'bold',
    color: '#1D2C5E',
  },
  statsSection: {
    backgroundColor: '#FFFFFF',
    padding: moderateScale(20),
    borderRadius: moderateScale(20),
    marginBottom: moderateScale(16),
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: moderateScale(2),
    },
    shadowOpacity: 0.1,
    shadowRadius: moderateScale(4),
    elevation: 4,
  },
  stats: {
    // Stats container
  },
  statRow: {
    marginBottom: verticalScale(12),
  },
  statInfo: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: verticalScale(6),
  },
  statName: {
    fontSize: isSmallDevice ? moderateScale(11) : moderateScale(13),
    color: '#666',
    fontWeight: '500',
    flex: 1,
  },
  statValue: {
    fontSize: isSmallDevice ? moderateScale(12) : moderateScale(14),
    fontWeight: 'bold',
    color: '#1D2C5E',
    width: moderateScale(30),
    textAlign: 'right',
  },
  statBarContainer: {
    height: moderateScale(8),
    backgroundColor: '#F0F0F0',
    borderRadius: moderateScale(4),
    overflow: 'hidden',
  },
  statBar: {
    height: '100%',
    borderRadius: moderateScale(4),
  },
  abilitiesSection: {
    backgroundColor: '#FFFFFF',
    padding: moderateScale(20),
    borderRadius: moderateScale(20),
    marginBottom: moderateScale(16),
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: moderateScale(2),
    },
    shadowOpacity: 0.1,
    shadowRadius: moderateScale(4),
    elevation: 4,
  },
  abilitiesList: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    justifyContent: 'center',
  },
  ability: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: '#F8F8F8',
    paddingHorizontal: moderateScale(16),
    paddingVertical: moderateScale(10),
    borderRadius: moderateScale(20),
    margin: moderateScale(4),
    minWidth: isSmallDevice ? moderateScale(100) : moderateScale(120),
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: moderateScale(1),
    },
    shadowOpacity: 0.1,
    shadowRadius: moderateScale(2),
    elevation: 2,
  },
  abilityText: {
    fontSize: isSmallDevice ? moderateScale(10) : moderateScale(12),
    color: '#1D2C5E',
    fontWeight: '500',
    marginLeft: moderateScale(8),
  },
});

export default PokemonDetailScreen;

--- FILE: ./screens/PokemonListByTypeScreen.tsx ---

import React, { useState, useEffect } from 'react';
import { 
  View, 
  FlatList, 
  StyleSheet, 
  TextInput, 
  RefreshControl,
  Text 
} from 'react-native';
import { PokemonCard } from '../components/PokemonCard';
import { LoadingIndicator } from '../components/LoadingIndicator';
import { ErrorMessage } from '../components/ErrorMessage';
import { NetworkStatus } from '../components/NetworkStatus';
import { Pokemon } from '../types/pokemon';
import { FontAwesome6 } from '@react-native-vector-icons/fontawesome6';
import { usePokemonByType } from '../hooks/usePokemonByType';
import { useResponsive } from '../hooks/useResponsive';
import { PokemonNavbar } from '../components/PokemonNavbar';

interface PokemonListByTypeScreenProps {
  route: any;
  navigation: any;
}

export const PokemonListByTypeScreen: React.FC<PokemonListByTypeScreenProps> = ({ 
  route, 
  navigation 
}) => {
  const { type } = route.params;
  const { 
    pokemonList, 
    loading, 
    loadingMore, 
    error, 
    hasMore, 
    loadMore, 
    refresh 
  } = usePokemonByType(type);
  
  const { moderateScale, isSmallDevice } = useResponsive();
  const [searchQuery, setSearchQuery] = useState('');
  const [refreshing, setRefreshing] = useState(false);
  
  const handleRefresh = async () => {
    setRefreshing(true);
    await refresh();
    setRefreshing(false);
  };

  const filteredPokemon = pokemonList.filter(pokemon =>
    pokemon.name.toLowerCase().includes(searchQuery.toLowerCase())
  );

  const handlePokemonPress = (pokemon: Pokemon) => {
    navigation.navigate('PokemonDetail', { pokemon });
  };

  const handleLoadMore = () => {
    if (!type && !loadingMore && hasMore) {
      loadMore();
    }
  };

  const styles = createStyles(moderateScale, isSmallDevice);

  if (error && pokemonList.length === 0) {
    return (
      <View style={styles.container}>
        <NetworkStatus />
        <ErrorMessage message={error} onRetry={refresh} />
      </View>
    );
  }

  return (
    <View style={styles.container}>
      <NetworkStatus />
      
      <View style={styles.searchContainer}>
        <FontAwesome6 name="magnifying-glass" size={moderateScale(16)} color="#666" iconStyle='solid'/>
        <TextInput
          style={styles.searchInput}
          placeholder={`Search ${type || 'all'} Pokémon...`}
          value={searchQuery}
          onChangeText={setSearchQuery}
          placeholderTextColor="#999"
        />
      </View>

      <FlatList
        data={filteredPokemon}
        renderItem={({ item }) => (
          <PokemonCard
            pokemon={item}
            onPress={handlePokemonPress}
          />
        )}
        keyExtractor={(item) => item.id.toString()}
        refreshControl={
          <RefreshControl 
            refreshing={refreshing || loading} 
            onRefresh={handleRefresh} 
          />
        }
        onEndReached={handleLoadMore}
        onEndReachedThreshold={0.5}
        numColumns={2}
        columnWrapperStyle={styles.columnWrapper}
        ListEmptyComponent={
          loading ? (
            <LoadingIndicator />
          ) : (
            <View style={styles.emptyState}>
              <FontAwesome6 name="magnifying-glass" size={moderateScale(48)} color="#ccc" iconStyle='solid'/>
              <Text style={styles.emptyStateText}>
                {searchQuery ? 'No Pokémon found' : `No ${type || ''} Pokémon available`}
              </Text>
              <Text style={styles.emptySubtext}>
                {searchQuery ? 'Try a different search term' : 'Check back later for more Pokémon'}
              </Text>
            </View>
          )
        }
        ListFooterComponent={
          loadingMore ? (
            <LoadingIndicator size="small" text="Loading more Pokémon..." />
          ) : !type && hasMore && filteredPokemon.length > 0 ? (
            <Text style={styles.loadMoreText}>Scroll down to load more Pokémon</Text>
          ) : null
        }
        contentContainerStyle={[
          styles.listContent,
          filteredPokemon.length === 0 && styles.emptyListContent
        ]}
        showsVerticalScrollIndicator={false}
      />
    </View>
  );
};

const createStyles = (
  moderateScale: (size: number, factor?: number) => number,
  isSmallDevice: boolean
) => StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#f5f5f5',
  },
  searchContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: 'white',
    margin: moderateScale(16),
    paddingHorizontal: moderateScale(12),
    borderRadius: moderateScale(8),
    shadowColor: '#000',
    shadowOffset: { width: 0, height: moderateScale(1) },
    shadowOpacity: 0.1,
    shadowRadius: moderateScale(2),
    elevation: 2,
    height: moderateScale(44),
  },
  searchInput: {
    flex: 1,
    marginLeft: moderateScale(8),
    paddingVertical: moderateScale(10),
    fontSize: isSmallDevice ? moderateScale(14) : moderateScale(16),
    color: '#333',
  },
  columnWrapper: {
    justifyContent: 'center',
  },
  listContent: {
    flexGrow: 1,
    paddingHorizontal: moderateScale(8),
    paddingBottom: moderateScale(20),
  },
  emptyListContent: {
    flexGrow: 1,
    justifyContent: 'center',
  },
  emptyState: {
    alignItems: 'center',
    padding: moderateScale(40),
    flex: 1,
    justifyContent: 'center',
  },
  emptyStateText: {
    marginTop: moderateScale(16),
    fontSize: isSmallDevice ? moderateScale(16) : moderateScale(18),
    color: '#666',
    textAlign: 'center',
    fontWeight: '600',
  },
  emptySubtext: {
    marginTop: moderateScale(8),
    fontSize: isSmallDevice ? moderateScale(12) : moderateScale(14),
    color: '#999',
    textAlign: 'center',
    lineHeight: moderateScale(20),
  },
  loadMoreText: {
    textAlign: 'center',
    padding: moderateScale(16),
    color: '#666',
    fontSize: moderateScale(14),
  },
});

export default PokemonListByTypeScreen;

--- FILE: ./screens/PokemonListScreen.tsx ---

import React, { useState, useEffect } from 'react';
import { 
  View, 
  FlatList, 
  StyleSheet, 
  RefreshControl,
  TextInput, 
  Text,
  TouchableOpacity
} from 'react-native';
import { usePokemon } from '../hooks/usePokemon';
import { useNetwork } from '../hooks/useNetwork';
import { PokemonCard } from '../components/PokemonCard';
import { LoadingIndicator } from '../components/LoadingIndicator';
import { ErrorMessage } from '../components/ErrorMessage';
import { NetworkStatus } from '../components/NetworkStatus';
import { PokemonNavbar } from '../components/PokemonNavbar'; // IMPORT BARU
import { StorageService } from '../services/storage';
import { Pokemon } from '../types/pokemon';
import { FontAwesome6 } from '@react-native-vector-icons/fontawesome6';
import { useResponsive } from '../hooks/useResponsive';

interface PokemonListScreenProps {
  navigation: any;
}

export const PokemonListScreen: React.FC<PokemonListScreenProps> = ({ navigation }) => {
  const { pokemonList, loading, error, hasMore, loadMore, refresh } = usePokemon();
  const { isConnected } = useNetwork();
  const { scale, moderateScale, isSmallDevice, isTablet } = useResponsive();
  
  const [searchQuery, setSearchQuery] = useState('');
  const [favorites, setFavorites] = useState<number[]>([]);
  const [showFavorites, setShowFavorites] = useState(false);
  const [refreshing, setRefreshing] = useState(false);

  useEffect(() => {
    loadFavorites();
  }, []);

  const loadFavorites = async () => {
    const favs = await StorageService.getFavorites();
    setFavorites(favs);
  };

  const toggleFavorite = async (pokemonId: number) => {
    if (favorites.includes(pokemonId)) {
      await StorageService.removeFavorite(pokemonId);
    } else {
      await StorageService.addFavorite(pokemonId);
    }
    loadFavorites();
  };

  const handleRefresh = async () => {
    setRefreshing(true);
    await refresh();
    setRefreshing(false);
  };

  const filteredPokemon = pokemonList.filter(pokemon => {
    const matchesSearch = pokemon.name.toLowerCase().includes(searchQuery.toLowerCase());
    const isFavorite = favorites.includes(pokemon.id);
    
    if (showFavorites) {
      return matchesSearch && isFavorite;
    }
    return matchesSearch;
  });

  const handlePokemonPress = (pokemon: Pokemon) => {
    navigation.navigate('PokemonDetail', { pokemon });
  };

  const renderPokemonItem = ({ item }: { item: Pokemon }) => (
    <PokemonCard
      pokemon={item}
      onPress={handlePokemonPress}
      isFavorite={favorites.includes(item.id)}
      onToggleFavorite={toggleFavorite}
    />
  );

  const loadMorePokemon = () => {
    if (!loading && hasMore && isConnected && !showFavorites) {
      loadMore();
    }
  };

  const styles = createStyles(scale, moderateScale, isSmallDevice, isTablet);

  if (error && pokemonList.length === 0) {
    return (
      <View style={styles.container}>
        <PokemonNavbar />
        <NetworkStatus />
        <ErrorMessage message={error} onRetry={refresh} />
      </View>
    );
  }

  return (
    <View style={styles.container}>
      <PokemonNavbar /> {/* TAMBAHKAN DI SINI */}
      <NetworkStatus />
      
      <View style={styles.header}>
        <View style={styles.searchContainer}>
          <FontAwesome6 name="magnifying-glass" size={moderateScale(16)} color="#666" iconStyle='solid'/>
          <TextInput
            style={styles.searchInput}
            placeholder="Search Pokémon..."
            value={searchQuery}
            onChangeText={setSearchQuery}
            placeholderTextColor="#999"
          />
        </View>
        
        <TouchableOpacity 
          style={[styles.filterButton, showFavorites && styles.filterButtonActive]}
          onPress={() => setShowFavorites(!showFavorites)}
        >
          <FontAwesome6 
            name="heart" 
            size={moderateScale(20)} 
            color={showFavorites ? "#FFCB05" : "#FFFFFF"} 
          />
        </TouchableOpacity>
      </View>

      <FlatList
        data={filteredPokemon}
        renderItem={renderPokemonItem}
        keyExtractor={(item) => item.id.toString()}
        refreshControl={
          <RefreshControl 
            refreshing={refreshing || loading} 
            onRefresh={handleRefresh} 
          />
        }
        onEndReached={loadMorePokemon}
        onEndReachedThreshold={0.3}
        numColumns={2}
        columnWrapperStyle={styles.columnWrapper}
        ListEmptyComponent={
          showFavorites ? (
            <View style={styles.emptyState}>
              <FontAwesome6 name="heart" size={moderateScale(48)} color="#ccc" />
              <Text style={styles.emptyStateText}>No favorite Pokémon yet</Text>
              <Text style={styles.emptySubtext}>
                Tap the heart icon on Pokémon to add them here
              </Text>
            </View>
          ) : loading ? (
            <LoadingIndicator />
          ) : (
            <View style={styles.emptyState}>
              <FontAwesome6 name="magnifying-glass" size={moderateScale(48)} color="#ccc" iconStyle='solid'/>
              <Text style={styles.emptyStateText}>No Pokémon found</Text>
              <Text style={styles.emptySubtext}>
                {searchQuery ? 'Try a different search term' : 'Check your internet connection'}
              </Text>
            </View>
          )
        }
        ListFooterComponent={
          loading && pokemonList.length > 0 && !showFavorites ? (
            <LoadingIndicator size="small" text="Loading more Pokémon..." />
          ) : null
        }
        contentContainerStyle={[
          styles.listContent,
          filteredPokemon.length === 0 && styles.emptyListContent
        ]}
        showsVerticalScrollIndicator={false}
      />
    </View>
  );
};

const createStyles = (
  scale: (size: number) => number,
  moderateScale: (size: number, factor?: number) => number,
  isSmallDevice: boolean,
  isTablet: boolean
) => StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#F8F8F8',
  },
  header: {
    flexDirection: 'row',
    padding: moderateScale(16),
    backgroundColor: '#FFFFFF',
    alignItems: 'center',
    shadowColor: '#1D2C5E',
    shadowOffset: {
      width: 0,
      height: moderateScale(4),
    },
    shadowOpacity: 0.1,
    shadowRadius: moderateScale(8),
    elevation: 6,
    borderBottomWidth: 2,
    borderBottomColor: '#FFCB05',
  },
  searchContainer: {
    flex: 1,
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: '#F8F8F8',
    borderRadius: moderateScale(25),
    paddingHorizontal: moderateScale(16),
    marginRight: moderateScale(12),
    height: moderateScale(44),
    borderWidth: 2,
    borderColor: '#1D2C5E',
  },
  searchInput: {
    flex: 1,
    marginLeft: moderateScale(8),
    paddingVertical: moderateScale(8),
    fontSize: isSmallDevice ? moderateScale(14) : moderateScale(16),
    color: '#333333',
  },
  filterButton: {
    padding: moderateScale(12),
    backgroundColor: '#1D2C5E',
    borderRadius: moderateScale(25),
    height: moderateScale(44),
    justifyContent: 'center',
    alignItems: 'center',
    minWidth: moderateScale(44),
    shadowColor: '#000',
    shadowOffset: { width: 0, height: moderateScale(2) },
    shadowOpacity: 0.2,
    shadowRadius: moderateScale(4),
    elevation: 3,
  },
  filterButtonActive: {
    backgroundColor: '#DC0A2D',
  },
  columnWrapper: {
    justifyContent: 'center',
    paddingHorizontal: moderateScale(8),
  },
  listContent: {
    flexGrow: 1,
    paddingHorizontal: moderateScale(8),
    paddingBottom: moderateScale(20),
  },
  emptyListContent: {
    flexGrow: 1,
    justifyContent: 'center',
  },
  emptyState: {
    alignItems: 'center',
    padding: moderateScale(40),
    flex: 1,
    justifyContent: 'center',
  },
  emptyStateText: {
    marginTop: moderateScale(16),
    fontSize: isSmallDevice ? moderateScale(16) : moderateScale(18),
    color: '#666',
    textAlign: 'center',
    fontWeight: '600',
  },
  emptySubtext: {
    marginTop: moderateScale(8),
    fontSize: isSmallDevice ? moderateScale(12) : moderateScale(14),
    color: '#999',
    textAlign: 'center',
    lineHeight: moderateScale(20),
  },
});

export default PokemonListScreen;

--- FILE: ./screens/ProfileScreen.tsx ---

import React from 'react';
import { View, Text, StyleSheet, ScrollView } from 'react-native';
import { FontAwesome6 } from '@react-native-vector-icons/fontawesome6';
import { PokemonNavbar } from '../components/PokemonNavbar';
import { useResponsive } from '../hooks/useResponsive';

export const ProfileScreen: React.FC = () => {
  const { moderateScale } = useResponsive();
  
  const styles = createStyles(moderateScale);

  return (
    <View style={styles.container}>
      <PokemonNavbar />
      <ScrollView style={styles.scrollView} contentContainerStyle={styles.scrollContent}>
        <View style={styles.header}>
          <FontAwesome6 name="user" size={moderateScale(80)} color="#DC0A2D" />
          <Text style={styles.title}>Pokédex App</Text>
          <Text style={styles.subtitle}>React Native Challenge</Text>
        </View>
        
        <View style={styles.section}>
          <Text style={styles.sectionTitle}>App Information</Text>
          <View style={styles.infoItem}>
            <FontAwesome6 name="code" size={moderateScale(20)} color="#1D2C5E" iconStyle='solid'/>
            <Text style={styles.infoText}>Built with React Native & TypeScript</Text>
          </View>
          <View style={styles.infoItem}>
            <FontAwesome6 name="database" size={moderateScale(20)} color="#1D2C5E" iconStyle='solid'/>
            <Text style={styles.infoText}>Data from PokeAPI</Text>
          </View>
          <View style={styles.infoItem}>
            <FontAwesome6 name="heart" size={moderateScale(20)} color="#1D2C5E" iconStyle='solid'/>
            <Text style={styles.infoText}>Favorites with AsyncStorage</Text>
          </View>
          <View style={styles.infoItem}>
            <FontAwesome6 name="mobile" size={moderateScale(20)} color="#1D2C5E" iconStyle='solid'/>
            <Text style={styles.infoText}>Fully Responsive Design</Text>
          </View>
        </View>

        <View style={styles.section}>
          <Text style={styles.sectionTitle}>Features</Text>
          <View style={styles.featureItem}>
            <FontAwesome6 name="check" size={moderateScale(16)} color="#4CD964" iconStyle='solid'/>
            <Text style={styles.featureText}>Browse Pokémon by Type</Text>
          </View>
          <View style={styles.featureItem}>
            <FontAwesome6 name="check" size={moderateScale(16)} color="#4CD964" iconStyle='solid'/>
            <Text style={styles.featureText}>Search Pokémon</Text>
          </View>
          <View style={styles.featureItem}>
            <FontAwesome6 name="check" size={moderateScale(16)} color="#4CD964" iconStyle='solid'/>
            <Text style={styles.featureText}>Favorite Pokémon</Text>
          </View>
          <View style={styles.featureItem}>
            <FontAwesome6 name="check" size={moderateScale(16)} color="#4CD964" iconStyle='solid'/>
            <Text style={styles.featureText}>Detailed Pokémon Info</Text>
          </View>
        </View>

        <View style={styles.footer}>
          <Text style={styles.footerText}>Made with ❤️ using React Native</Text>
        </View>
      </ScrollView>
    </View>
  );
};

const createStyles = (moderateScale: (size: number, factor?: number) => number) => 
  StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#F8F8F8',
  },
  scrollView: {
    flex: 1,
  },
  scrollContent: {
    flexGrow: 1,
    paddingBottom: moderateScale(20),
  },
  header: {
    alignItems: 'center',
    padding: moderateScale(32),
    backgroundColor: '#FFFFFF',
    marginBottom: moderateScale(16),
    shadowColor: '#1D2C5E',
    shadowOffset: {
      width: 0,
      height: moderateScale(2),
    },
    shadowOpacity: 0.1,
    shadowRadius: moderateScale(4),
    elevation: 3,
  },
  title: {
    fontSize: moderateScale(24),
    fontWeight: 'bold',
    color: '#1D2C5E',
    marginTop: moderateScale(16),
  },
  subtitle: {
    fontSize: moderateScale(16),
    color: '#666',
    marginTop: moderateScale(4),
  },
  section: {
    backgroundColor: '#FFFFFF',
    padding: moderateScale(16),
    marginHorizontal: moderateScale(16),
    marginBottom: moderateScale(16),
    borderRadius: moderateScale(12),
    shadowColor: '#1D2C5E',
    shadowOffset: {
      width: 0,
      height: moderateScale(2),
    },
    shadowOpacity: 0.1,
    shadowRadius: moderateScale(4),
    elevation: 3,
  },
  sectionTitle: {
    fontSize: moderateScale(18),
    fontWeight: 'bold',
    color: '#DC0A2D',
    marginBottom: moderateScale(12),
  },
  infoItem: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingVertical: moderateScale(8),
    borderBottomWidth: 1,
    borderBottomColor: '#F0F0F0',
  },
  infoText: {
    marginLeft: moderateScale(12),
    fontSize: moderateScale(16),
    color: '#333',
    flex: 1,
  },
  featureItem: {
    flexDirection: 'row',
    alignItems: 'center',
    paddingVertical: moderateScale(6),
  },
  featureText: {
    marginLeft: moderateScale(12),
    fontSize: moderateScale(14),
    color: '#333',
  },
  footer: {
    alignItems: 'center',
    padding: moderateScale(20),
  },
  footerText: {
    fontSize: moderateScale(14),
    color: '#666',
    fontStyle: 'italic',
  },
});

export default ProfileScreen;

--- FILE: ./navigation/HomeTopTabsNavigator.tsx ---

import React from 'react';
import { createMaterialTopTabNavigator } from '@react-navigation/material-top-tabs';
import { HomeTopTabParamList } from './types';
import { PokemonListByTypeScreen } from '../screens/PokemonListByTypeScreen';
import FontAwesome6 from '@react-native-vector-icons/fontawesome6';
import { useResponsive } from '../hooks/useResponsive';
import { PokemonNavbar } from '../components/PokemonNavbar';
import { View, StyleSheet } from 'react-native';

const TopTab = createMaterialTopTabNavigator<HomeTopTabParamList>();

const pokemonTypes = [
  { name: 'All', icon: 'list', color: '#FFCB05' },
  { name: 'Fire', icon: 'fire', color: '#EE8130' },
  { name: 'Water', icon: 'droplet', color: '#6390F0' },
  { name: 'Grass', icon: 'leaf', color: '#7AC74C' },
  { name: 'Electric', icon: 'bolt', color: '#F7D02C' },
  { name: 'Ice', icon: 'snowflake', color: '#96D9D6' },
  { name: 'Fighting', icon: 'hand-fist', color: '#C22E28' },
  { name: 'Poison', icon: 'skull', color: '#A33EA1' },
  { name: 'Ground', icon: 'mountain', color: '#E2BF65' },
  { name: 'Flying', icon: 'dove', color: '#A98FF3' },
  { name: 'Psychic', icon: 'brain', color: '#F95587' },
  { name: 'Bug', icon: 'bug', color: '#A6B91A' },
  { name: 'Rock', icon: 'mountain', color: '#B6A136' },
  { name: 'Ghost', icon: 'ghost', color: '#735797' },
  { name: 'Dragon', icon: 'dragon', color: '#6F35FC' },
  { name: 'Dark', icon: 'moon', color: '#705746' },
  { name: 'Steel', icon: 'shield', color: '#B7B7CE' },
  { name: 'Fairy', icon: 'wand-magic-sparkles', color: '#D685AD' },
];

export const HomeTopTabsNavigator: React.FC = () => {
  const { scale, isSmallDevice, moderateScale } = useResponsive();

  const styles = createStyles(moderateScale);

  return (
    <View style={styles.container}>
      <PokemonNavbar />
      <TopTab.Navigator
        screenOptions={{
          tabBarScrollEnabled: true,
          tabBarItemStyle: { 
            width: isSmallDevice ? scale(80) : scale(100),
            paddingHorizontal: scale(4),
          },
          tabBarLabelStyle: { 
            fontSize: isSmallDevice ? scale(10) : scale(12), 
            fontWeight: 'bold',
            margin: 0,
            textTransform: 'capitalize',
            color: '#FFFFFF',
          },
          tabBarStyle: { 
            backgroundColor: '#1D2C5E',
            elevation: 0,
            shadowOpacity: 0,
          },
          tabBarIndicatorStyle: ({ route }) => ({
            backgroundColor: getTypeColor(route.name),
            height: scale(4),
            borderRadius: scale(2),
          }),
          tabBarIconStyle: {
            marginBottom: 0,
          },
        }}
      >
        {pokemonTypes.map((type) => (
          <TopTab.Screen
            key={type.name}
            name={type.name as keyof HomeTopTabParamList}
            component={PokemonListByTypeScreen}
            initialParams={{ type: type.name === 'All' ? null : type.name.toLowerCase() }}
            options={{
              title: type.name,
              tabBarIcon: ({ focused }) => {
                const typeColor = getTypeColor(type.name);
                return (
                  <FontAwesome6 
                    name={type.icon} 
                    size={isSmallDevice ? scale(14) : scale(16)} 
                    color={focused ? typeColor : '#CCCCCC'}
                    iconStyle='solid'
                  />
                );
              },
            }}
          />
        ))}
      </TopTab.Navigator>
    </View>
  );
};

// Helper function to get type color
const getTypeColor = (typeName: string): string => {
  const type = pokemonTypes.find(t => t.name === typeName);
  return type?.color || '#FFCB05';
};

const createStyles = (moderateScale: (size: number, factor?: number) => number) => 
  StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#F8F8F8',
  },
});

--- FILE: ./navigation/types.ts ---

import { Pokemon } from '../types/pokemon';

export type RootStackParamList = {
  MainTabs: undefined;
  PokemonDetail: { pokemon: Pokemon };
};

export type MainTabParamList = {
  Home: undefined;
  Favorites: undefined;
  Profile: undefined;
};

export type HomeTopTabParamList = {
  All: undefined;
  Fire: undefined;
  Water: undefined;
  Grass: undefined;
  Electric: undefined;
  Ice: undefined;
  Fighting: undefined;
  Poison: undefined;
  Ground: undefined;
  Flying: undefined;
  Psychic: undefined;
  Bug: undefined;
  Rock: undefined;
  Ghost: undefined;
  Dragon: undefined;
  Dark: undefined;
  Steel: undefined;
  Fairy: undefined;
};

--- FILE: ./navigation/AppNavigator.tsx ---

import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createStackNavigator } from '@react-navigation/stack';
import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';
import { FontAwesome6 } from '@react-native-vector-icons/fontawesome6';
import { RootStackParamList, MainTabParamList } from './types';
import { HomeTopTabsNavigator } from './HomeTopTabsNavigator';
import { PokemonDetailScreen } from '../screens/PokemonDetailScreen';
import { ProfileScreen } from '../screens/ProfileScreen';
import { FavoritesScreen } from '../screens/FavoritesScreen';

const Stack = createStackNavigator<RootStackParamList>();
const Tab = createBottomTabNavigator<MainTabParamList>();

const MainTabs: React.FC = () => {
  return (
    <Tab.Navigator
      screenOptions={{
        tabBarActiveTintColor: '#FFCB05',
        tabBarInactiveTintColor: '#FFFFFF',
        tabBarStyle: {
          backgroundColor: '#1D2C5E',
          borderTopWidth: 2,
          borderTopColor: '#FFCB05',
          height: 60,
        },
        tabBarLabelStyle: {
          fontWeight: 'bold',
          fontSize: 12,
        },
        headerShown: false,
      }}
    >
      <Tab.Screen
        name="Home"
        component={HomeTopTabsNavigator}
        options={{
          tabBarIcon: ({ color, size }) => (
            <FontAwesome6 name="house" size={size} color={color} iconStyle='solid'/>
          ),
          title: 'Home',
        }}
      />
      <Tab.Screen
        name="Favorites"
        component={FavoritesScreen}
        options={{
          tabBarIcon: ({ color, size }) => (
            <FontAwesome6 name="heart" size={size} color={color} iconStyle='solid'/>
          ),
          title: 'Favorites',
        }}
      />
      <Tab.Screen
        name="Profile"
        component={ProfileScreen}
        options={{
          tabBarIcon: ({ color, size }) => (
            <FontAwesome6 name="user" size={size} color={color} />
          ),
          title: 'Profile',
        }}
      />
    </Tab.Navigator>
  );
};

export const AppNavigator: React.FC = () => {
  return (
    <NavigationContainer>
      <Stack.Navigator>
        <Stack.Screen 
          name="MainTabs" 
          component={MainTabs}
          options={{ headerShown: false }}
        />
        <Stack.Screen 
          name="PokemonDetail" 
          component={PokemonDetailScreen}
          options={{ 
            title: 'Pokémon Details',
            headerShown: false
          }}
        />
      </Stack.Navigator>
    </NavigationContainer>
  );
};

--- FILE: ./src.txt ---

